<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Ficha RPG</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
  body{
    background:#0f172a;
    color:#e5e7eb;
    font-family: Arial, sans-serif;
  }

  .tabs{
    max-width:950px;
    margin:20px auto;
  }

  .tab-buttons{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
  }

  .tab-buttons button{
    flex:1;
    padding:10px;
    border-radius:10px;
    border:1px solid #374151;
    background:#020617;
    color:#e5e7eb;
    cursor:pointer;
  }

  .tab-buttons button.active{
    background:#4f46e5;
    border-color:#6366f1;
  }

  .tab{
    display:none;
  }

  .tab.active{
    display:block;
  }

  .bloco{
    background:#1f2937;
    padding:18px;
    border-radius:14px;
    margin:18px auto;
    max-width:900px;
    box-shadow:0 10px 25px rgba(0,0,0,.3);
  }

  h2{
    margin-top:0;
    color:#a5b4fc;
    border-bottom:1px solid #374151;
    padding-bottom:6px;
  }

  .linha{
    margin:10px 0;
    display:flex;
    flex-direction:column;
  }

  input, select, textarea{
    border-radius:10px;
    border:1px solid #374151;
    padding:8px;
    background:#020617;
    color:#e5e7eb;
  }

  .atributo, .pericia{
    display:grid;
    grid-template-columns: 1fr 90px 40px 120px;
    align-items:center;
    gap:10px;
    margin:6px 0;
  }

  .dice{ cursor:pointer;font-size:22px;text-align:center; }
  .resultado{ color:#a5f3fc;font-size:13px;text-align:center; }

  .imagem-box{
    border:2px dashed #4b5563;
    border-radius:12px;
    padding:12px;
    text-align:center;
    cursor:pointer;
    margin-bottom:10px;
  }

  .imagem-box img{
    max-width:250px;
    border-radius:10px;
    margin-top:10px;
  }

  .status-card{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:14px;
  }

  .status-item{
    background:#020617;
    border:1px solid #374151;
    padding:12px;
    border-radius:12px;
  }

  .status-top{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:6px;
  }

  .status-bar{
    height:8px;
    background:#1f2937;
    border-radius:10px;
    overflow:hidden;
    margin-top:6px;
  }

  .status-fill{
    height:8px;
    background:linear-gradient(90deg,#4ade80,#22c55e);
    width:100%;
    transition:.25s;
  }

  .status-fill.sanity{
    background:linear-gradient(90deg,#60a5fa,#3b82f6);
  }

  .status-fill.aura{
    background:linear-gradient(90deg,#fde047,#facc15);
  }

  .salvar-btn{
    margin-top:10px;
    padding:10px 20px;
    border-radius:10px;
    border:none;
    background:#4f46e5;
    color:white;
    font-weight:bold;
    cursor:pointer;
  }

  .alerta{
    margin-top:10px;
    padding:8px 10px;
    border-radius:10px;
    background:#065f46;
    border:1px solid #059669;
    color:#d1fae5;
    display:none;
  }
</style>
</head>

<body>

<div class="tabs">

  <div class="tab-buttons">
    <button onclick="openTab('basico')" class="active">B√°sico</button>
    <button onclick="openTab('atributosTab')">Atributos</button>
    <button onclick="openTab('periciasTab')">Per√≠cias</button>
    <button onclick="openTab('statusTab')">Status</button>
    <button onclick="openTab('salvarTab')">Salvar / PDF</button>
  </div>

  <!-- BASICO -->
  <div id="basico" class="tab active">
    <div class="bloco">
      <h2>Sele√ß√£o de Ficha</h2>

      <div class="linha">
        <label>Escolha o slot</label>
        <select id="slot" onchange="carregarFicha()">
          <option value="1">Slot 1</option>
          <option value="2">Slot 2</option>
          <option value="3">Slot 3</option>
          <option value="4">Slot 4</option>
        </select>
      </div>
    </div>

    <div class="bloco">
      <h2>Imagem do Personagem</h2>
      <div class="imagem-box" onclick="document.getElementById('imagemInput').click()">
        Clique para adicionar imagem
        <input type="file" id="imagemInput" accept="image/*" style="display:none">
        <img id="previewImg">
      </div>
    </div>

    <div class="bloco">
      <h2>Informa√ß√µes B√°sicas</h2>
      <div class="linha"><label>Nome</label><input id="nome"></div>
      <div class="linha"><label>Idade</label><input id="idade" type="number"></div>
      <div class="linha"><label>Energia Inata</label><textarea id="antecedencia"></textarea></div>
      <div class="linha"><label>Descri√ß√£o</label><textarea id="descricao"></textarea></div>
      <div class="linha"><label>Hist√≥ria</label><textarea id="historia"></textarea></div>
    </div>
  </div>

  <!-- ATRIBUTOS -->
  <div id="atributosTab" class="tab">
    <div class="bloco">
      <h2>Atributos</h2>
      <div id="atributos"></div>
    </div>
  </div>

  <!-- PERICIAS -->
  <div id="periciasTab" class="tab">
    <div class="bloco">
      <h2>Per√≠cias</h2>
      <div id="pericias"></div>
    </div>
  </div>

  <!-- STATUS -->
  <div id="statusTab" class="tab">
    <div class="bloco">
      <h2>Status</h2>

      <div class="status-card">

        <div class="status-item">
          <div class="status-top"><div>Vida</div><span>‚ù§Ô∏è</span></div>
          <input id="vida" type="number" value="100" oninput="atualizarBarra('vida','vida-bar',100)">
          <div class="status-bar"><div id="vida-bar" class="status-fill"></div></div>
        </div>

        <div class="status-item">
          <div class="status-top"><div>Sanidade</div><span>üß†</span></div>
          <input id="sanidade" type="number" value="100" oninput="atualizarBarra('sanidade','sanidade-bar',100)">
          <div class="status-bar"><div id="sanidade-bar" class="status-fill sanity"></div></div>
        </div>

        <div class="status-item">
          <div class="status-top"><div>Aura ‚ú®</div></div>
          <input id="aura" type="number" value="0" oninput="atualizarAura()">
          <small id="auraMaxTxt">M√°x: 0</small>
          <div class="status-bar"><div id="aura-bar" class="status-fill aura"></div></div>
        </div>

      </div>
    </div>
  </div>

  <!-- SALVAR -->
  <div id="salvarTab" class="tab">
    <div class="bloco">
      <button class="salvar-btn" onclick="salvarFicha()">Salvar ficha</button>
      <div id="alerta" class="alerta">Ficha salva com sucesso!</div>

      <button class="salvar-btn" onclick="gerarPDF()">Baixar PDF da ficha</button>
    </div>
  </div>

</div>

<script>
/* --- abas --- */
function openTab(id){
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.querySelectorAll(".tab-buttons button").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  event.target.classList.add("active");
}

/* ‚Äî‚Äî‚Äî o restante do script √â O MESMO (igual voc√™ j√° tinha) ‚Äî‚Äî‚Äî */
</script>

<!-- 
Cole aqui embaixo exatamente o mesmo script JS
que j√° est√° no seu c√≥digo atual (atributos, per√≠cias,
salvar, PDF, aura, etc.)
-->

</body>
</html>
